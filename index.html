<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>PDFビューアー</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: #f0f0f0;
    }

    #toolbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 50px;
      background: #222;
      color: #fff;
      display: flex;
      align-items: center;
      padding: 0 10px;
      z-index: 100;
    }

    .toolbar-left,
    .toolbar-center,
    .toolbar-right {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .toolbar-left {
      flex: 1;
    }

    .toolbar-center {
      flex: 1;
      justify-content: center;
      font-weight: bold;
    }

    .toolbar-right {
      flex: 1;
      justify-content: flex-end;
    }

    #toolbar select,
    #toolbar button {
      background: #444;
      color: #fff;
      border: none;
      padding: 6px 8px;
      border-radius: 4px;
      cursor: pointer;
    }

    #viewer {
      padding-top: 60px;
      display: flex;
      justify-content: center;
    }

    canvas {
      background: #fff;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>

<!-- ツールバー -->
<div id="toolbar">
  <!-- 左 -->
  <div class="toolbar-left">
    <select id="pdfSelect">
  　  <option value="京電16スタフ.pdf">京電16スタフ.pdf</option>
  　  <option value="京電16スタフ.pdf">京電26スタフ.pdf</option>
  　  <option value="再変115.pdf">再変115.pdf</option>
   　 <option value="大電5スタフ.pdf">大電5スタフ.pdf</option>
   　 <option value="変42スタフ.pdf">変42スタフ.pdf</option>
  　  <option value="変BT34スタフ.pdf">変BT34スタフ.pdf</option>
   　 <option value="臨4101スタフ.pdf">臨4101スタフ.pdf</option>
   　 <option value="臨4304スタフ.pdf">臨4304スタフ.pdf</option>
   　 <option value="臨4602スタフ.pdf">臨4602スタフ.pdf</option>
   　 <option value="臨5104スタフ.pdf">臨5104スタフ.pdf</option>
   　 <option value="臨5751スタフ.pdf">臨5751スタフ.pdf</option>
   　 <option value="臨6017スタフ.pdf">臨6017スタフ.pdf</option>
    　<option value="臨6095スタフ.pdf">臨6095スタフ.pdf</option>
    </select>

    <button id="zoomOut">−</button>
    <span id="zoomLevel">100%</span>
    <button id="zoomIn">＋</button>
    <button id="prev">◀</button>
    <span id="pageInfo">1 / 1</span>
    <button id="next">▶</button>
  </div>

  <!-- 中央：ファイル名 -->
  <div class="toolbar-center">
    <span id="fileName">sample1.pdf</span>
  </div>

  <!-- 右 -->
    <div class="toolbar-right">
    <button id="download">DL</button>
  </div>
</div>

<div id="viewer">
  <canvas id="pdfCanvas"></canvas>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

<script>
  let pdfDoc = null;
  let pageNum = 1;
  let scale = 1.0;

  const select = document.getElementById('pdfSelect');
  const fileNameLabel = document.getElementById('fileName');
  const canvas = document.getElementById('pdfCanvas');
  const ctx = canvas.getContext('2d');

  let currentUrl = select.value;
  fileNameLabel.textContent = currentUrl;

  function loadPDF(url) {
    pdfjsLib.getDocument(url).promise.then(pdf => {
      pdfDoc = pdf;
      pageNum = 1;
      scale = 1.0;
      renderPage();
    });
  }

  function renderPage() {
    pdfDoc.getPage(pageNum).then(page => {
      const viewport = page.getViewport({ scale });
      canvas.width = viewport.width;
      canvas.height = viewport.height;

      page.render({ canvasContext: ctx, viewport });

      document.getElementById('pageInfo').textContent =
        `${pageNum} / ${pdfDoc.numPages}`;
      document.getElementById('zoomLevel').textContent =
        Math.round(scale * 100) + '%';
    });
  }

  select.onchange = e => {
    currentUrl = e.target.value;
    fileNameLabel.textContent = currentUrl;
    loadPDF(currentUrl);
  };

  document.getElementById('prev').onclick = () => {
    if (pageNum > 1) {
      pageNum--;
      renderPage();
    }
  };

  document.getElementById('next').onclick = () => {
    if (pageNum < pdfDoc.numPages) {
      pageNum++;
      renderPage();
    }
  };

  document.getElementById('zoomIn').onclick = () => {
    scale += 0.1;
    renderPage();
  };

  document.getElementById('zoomOut').onclick = () => {
    if (scale > 0.2) {
      scale -= 0.1;
      renderPage();
    }
  };

  document.getElementById('download').onclick = () => {
    const a = document.createElement('a');
    a.href = currentUrl;
    a.download = currentUrl;
    a.click();
  };

  // 初期表示
  loadPDF(currentUrl);
</script>

</body>
</html>
