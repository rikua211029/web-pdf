<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>PDFビューア（機能バー付き）</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: #f0f0f0;
    }

    /* 上部ツールバー */
    #toolbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 50px;
      background: #222;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 0 10px;
      z-index: 100;
    }

    #toolbar button {
      background: #444;
      color: #fff;
      border: none;
      padding: 6px 10px;
      cursor: pointer;
      border-radius: 4px;
    }

    #toolbar button:hover {
      background: #666;
    }

    #viewer {
      padding-top: 60px; /* ツールバー分 */
      display: flex;
      justify-content: center;
    }

    canvas {
      background: #fff;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>

<!-- 機能バー -->
<div id="toolbar">
  <button id="prev">◀</button>
  <span id="pageInfo">1 / 1</span>
  <button id="next">▶</button>

  <button id="zoomOut">−</button>
  <span id="zoomLevel">100%</span>
  <button id="zoomIn">＋</button>
</div>

<!-- PDF表示エリア -->
<div id="viewer">
  <canvas id="pdfCanvas"></canvas>
</div>

<!-- PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

<script>
  const url = '変42.pdf';

  let pdfDoc = null;
  let pageNum = 1;
  let scale = 1.0;

  const canvas = document.getElementById('pdfCanvas');
  const ctx = canvas.getContext('2d');

  pdfjsLib.getDocument(url).promise.then(pdf => {
    pdfDoc = pdf;
    renderPage();
  });

  function renderPage() {
    pdfDoc.getPage(pageNum).then(page => {
      const viewport = page.getViewport({ scale });
      canvas.width = viewport.width;
      canvas.height = viewport.height;

      page.render({
        canvasContext: ctx,
        viewport
      });

      document.getElementById('pageInfo').textContent =
        `${pageNum} / ${pdfDoc.numPages}`;
      document.getElementById('zoomLevel').textContent =
        Math.round(scale * 100) + '%';
    });
  }

  document.getElementById('prev').onclick = () => {
    if (pageNum > 1) {
      pageNum--;
      renderPage();
    }
  };

  document.getElementById('next').onclick = () => {
    if (pageNum < pdfDoc.numPages) {
      pageNum++;
      renderPage();
    }
  };

  document.getElementById('zoomIn').onclick = () => {
    scale += 0.1;
    renderPage();
  };

  document.getElementById('zoomOut').onclick = () => {
    if (scale > 0.2) {
      scale -= 0.1;
      renderPage();
    }
  };
</script>

</body>
</html>
